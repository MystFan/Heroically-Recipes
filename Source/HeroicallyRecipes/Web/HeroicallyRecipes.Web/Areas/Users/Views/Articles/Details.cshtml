@model HeroicallyRecipes.Web.Models.Articles.ArticleViewModel
@using Microsoft.AspNet.Identity;
@{
    ViewBag.Title = "Article Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<header>
    <div class="jumbotron">
        <h1>@Model.Title</h1>
    </div>
</header>
<section>
    <article>
        <p>@Model.Content</p>
    </article>
    <div class="panel panel-default">
        <div class="page-header text-center">
            <h3>Leave comment    <span class="glyphicon glyphicon-pencil"></span></h3>
            <textarea class="form-control" id="textarea-signalr-comment" data-action-userId="@User.Identity.GetUserId()" data-action-articleId="@Model.Id" name="comment" rows="3"></textarea>
            <button class="btn btn-default" id="btn-signalr-comment">Submit</button>
        </div>
        <div class="panel-body">
            <p>Posted by <strong>@Model.Author</strong></p>
        </div>

        <div class="panel-footer">
            <h3 class="text-center">Comments</h3>
            @foreach (var comment in Model.Comments)
            {
                <div class="panel panel-success">
                    <div id="comments-container">
                        <div>
                            <p><span class="glyphicon glyphicon-comment"></span>    @comment.Content</p>
                            <br />
                            <p><span class="glyphicon glyphicon-user"></span><strong>    @comment.Author</strong></p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

@section scripts{
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="/signalr/hubs" type="text/javascript"></script>
    <script src="~/Scripts/uploadComment.js"></script>
}



